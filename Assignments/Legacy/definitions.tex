% Picture database
\DeclareGraphicsExtensions{.pdf,.png,.jpg}
\graphicspath{
%{ }
}

% Flags
\newboolean{withsolution}
\newboolean{coreprb}

\newcommand{\lecnotes}{NCSENEW}

% For software
\newcommand{\matlab}{\textsc{Matlab}}
\newcommand{\Matlab}{\matlab}
\newcommand{\eigen}{\textsc{Eigen}}
\newcommand{\Cpp}{\textsc{C++}}
\newcommand{\Eigen}{\eigen}

% External references
\newcommand*{\lref}[1]{\cite[\cref{NCSENEW-#1}]{NCSE}}
\newcommand*{\leqref}[1]{\ncseeq{#1}}
\newcommand*{\ncseeq}[1]{\cite[\eqref{\lecnotes-#1}]{NCSE}}

% For backward compatibility
\newcommand*{\ncsesect}[1]{\lref{#1}}
\newcommand*{\ncseex}[1]{\lref{#1}}
\newcommand*{\ncsedef}[1]{\lref{#1}}
\newcommand*{\ncseref}[2][]{\lref{#2}}
\newcommand*{\ncserem}[1]{\lref{#1}}
\newcommand*{\ncsethm}[1]{\lref{#1}}

% Sectioning
% \makeatletter
% \renewcommand{\thesection}{Problem \arabic{section}.}
% \renewcommand{\section}{\@startsection{section}{0}{0em}{1ex}{1pt}{\bfseries\large}}
% % \subproblem, with bookmarks and refs:
% \renewcommand{\thesubsection}{(\arabic{section}\alph{subsection})}
% \renewcommand{\subsection}{\@startsection{subsection}{1}{0em}{1ex}{-1pt}{\bfseries}}
% % \newcommand*{\problem}[1]{\section{#1} \coreprb}
% \newcommand{\subproblem}{\subsection[(\arabic{section}\alph{subsection})]{}}
% \makeatother

% Sizes
\setlength{\parskip}{6pt}
\setlength{\parindent}{0pt}

% Shortcut commands

\newcommand{\IC}{\bbC}
\newcommand{\IN}{\bbN}
\newcommand{\IR}{\bbR}
\newcommand{\IZ}{\bbZ}
\newcommand{\calT}{{\mathcal{T}}}
\newcommand{\Vzero}{{\mathbf{0}}}

% Exercises utilities
\makeatletter
\renewcommand{\thesection}{Problem Sheet \arabic{section}}
\renewcommand{\thesubsection}{Problem \arabic{subsection}}
\renewcommand{\subsection}{\@startsection{subsection}{2}{0em}{1ex}{1pt}{\bfseries\large}}
\renewcommand{\thesubsubsection}{(\arabic{subsection}\alph{subsubsection})}
\renewcommand{\subsubsection}{\@startsection{subsubsection}{3}{0em}{1ex}{-1pt}{\bfseries}}
\makeatother

% \newcommand{\coreproblem}{$\bigstar$}
\newcommand{\coreproblem}{{\ (core problem)}}
\newcommand{\examproblem}{{\ (exam problem)}}
\newcommand{\difficulty}[1]{{\epsdice{#1} \ }}

\newcommand{\contitional}[2]{%
  \ifthenelse{\boolean{#1}}{#2}{}%
}
 
\newenvironment{problem}[1][]{% BEFORE
  \subsection{#1}%
}{% AFTER
}

\newenvironment{subproblem}[1][]{% BEFORE
\subsubsection[(\arabic{section}\alph{subsection})]{}%
\difficulty{#1}%
}{% AFTER
}

\newenvironment{hint}{% BEFORE
%  ~\newline

 \textsc{Hint:}%
}{% AFTER
%  ~\\%
}

% \newenvironment{solution}{% BEFORE
%  \contitional{withsolution}\bgroup
%  \bgroup%
%  \textbf{Solution:}%
%  
% }{% AFTER
%  \egroup{}%
%  
%  
%  ~\newline
% }
% \excludecomment{solution}
% \usepackage{environ}
\NewEnviron{solution}{%
  \contitional{withsolution}{
  
  \textbf{Solution:} \BODY}
}

\newcommand{\version}{1.0}


\newenvironment{sheet}[3]{% BEFORE
\clearpage%

\refstepcounter{section}%
\addcontentsline{toc}{section}{Problem Sheet \protect\numberline{\thesection}#1}%
\sectionmark{#1}

\setcounter{page}{1}
\setcounter{subsection}{0}
\begin{minipage}[c]{0.2\textwidth}%
  \profname \\ \assistantname%
\end{minipage}%
\begin{minipage}[c]{0.58\textwidth}\centering%
%   Course \lecturenumber, \semestername\\[2ex]%
%   \textsf{\Large \lecturename}%
 \semestername\\[2ex]
 \Large{\lecturename}
\end{minipage}%
\begin{minipage}[c]{0.2\textwidth}\flushright%
  ETH Z\"urich \\ D-MATH%
\end{minipage}%
\vspace{1cm}%

\begin{center}  {\Large Problem Sheet #1} \end{center}\vspace{1cm}%
% % \stepcounter{ExSheetNumber}
\newcommand{\secondarg}{#2}%
\newcommand{\thirdarg}{#3}%
%\addcontentsline{toc}{chapter}{Problem Sheet #1}

}{%AFTER

\vspace{6mm} %
\begin{large}  Issue date: \secondarg \\[2mm]  Hand-in: \thirdarg \, (in the boxes in front of HG G 53/54).\\  \end{large}
% \begin{center}\begin{tabular}{| r || c| c| c| c| c| c| c| c|}\hline
% Exercises  & #3 \\\hline
% Requested correction 
% &\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm}&\rule{8mm}{0mm} \\\hline
% \end{tabular}\end{center}

% \printbibliography
{\gray{Version compiled on: \today \, (v. \version).}}
}

\newenvironment{lineofcode}{% BEFORE
 \begin{center}
%  \verbatim
 \texttt\bgroup
}{% AFTER
 \egroup
%  \endverbatim
 \end{center}
}

\newcommand{\chpt}{}

% Math notation
\newcommand{\norm}[1]{\ensuremath{\left\lVert #1 \right\rVert}}
\renewcommand{\vec}[1]{\ensuremath{\mathbf{#1}}}


% \newcommand{\func}[1]{\verb|#1|}
\newcommand{\func}[1]{\texttt{#1}}

\newtheorem{thm}{Theorem}[section]
\newtheorem{rmk}{Remark}
\newtheorem{claim}{Claim}
\newtheorem{assumption}{Assumption}
\newtheorem{lemma}{Lemma}
\newtheorem{defn}{Definition}
\newtheorem{prop}{Proposition}
\newtheorem{cor}{Corollary}
\newtheorem{remk}{Remark}
\newtheorem{algorithm}{Algorithm}

\setcounter{section}{-1}