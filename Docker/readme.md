# The NumCSE development container

This is the designated development container for the NumCSE course and its numerous codes. It is based on Docker and coupled with a CMake build system. The advantage is that, apart from Docker itself, **you do not need to install anything** and the results are consistent with everyone else. Macs with an **Apple M1 chips are supported**. You can get Docker here: https://www.docker.com/products/docker-desktop/.

## Usage

To use (i.e. get a shell on) the container, simply run `enter.sh` (Linux and MacOS). This might take a **couple of minutes the first time**, as Docker downloads and builds the underlying image for you. You may have multiple shells attached at the same time. 

### Editing

The source code in this repository can still be edited using your favorite IDE on your host OS, it is mapped into the container. 

### Compiling

Switch to the `/build` directory (the shortcut `cdbuild` will help you with that by matching your current path in the source code), then use the `make` command to compile. You **do not need to run Cmake** as it is run upon launch of the container. You may, of course,  re-run Cmake manually.

### Executing

Switch to the `/numcse/bin` directory (the shortcut `cdbin` will help you with that) and execute the binaries built in the previous step. This will be mapped as `bin` to your host directly under the root of this repository. Use this directory to **inspect the plots** generated by the codes. Caution: you generally **cannot run the binaries on your host OS**. Always run them from inside the container. In order to get back to the corresponding build or source directory, use the shortcut `cdbuild` or `cdsrc`, respectively.

## Performance

To increase container performance, you may be able to increase the number of CPUs and the memory Docker is allowed to use for running its containers (On Docker Desktiop: **Preferences > Resources**). This may be important for multi-threaded benchmark codes or compiling the entire code base. Note that on MacOS and Windows, Docker requires an intermediate VM layer and does not run natively. True native performance can only be achieved on a Linux host OS.

## Code Expert tool

It is currently not possible to run the Docker-based Code Expert tool from inside the container. Please run it **directly from your host**.